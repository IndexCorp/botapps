<script>
    const tg = window.Telegram.WebApp;

    // Получаем параметры URL
    const urlParams = new URLSearchParams(window.location.search);
    const game = urlParams.get('game');  // Получаем параметр 'game'
    const user = urlParams.get('user');  // Получаем параметр 'user'

    // Выводим параметры на экран для демонстрации
    console.log(`Game: ${game}, User: ${user}`);

    window.onload = () => {
        tg.expand();  // Растягиваем на весь экран при открытии

        // Проверка наличия кнопки настроек
        if (tg.SettingsButton) {
            tg.web_app_setup_settings_button({
                is_visible: true // Делаем кнопку видимой
            });

            tg.SettingsButton.onClick(() => {
                if (tg.isFullscreen) {
                    tg.exitFullscreen(); // Выключаем полноэкранный режим
                    console.log("Выключен полноэкранный режим.");
                } else {
                    tg.requestFullscreen(); // Включаем полноэкранный режим
                    console.log("Включен полноэкранный режим.");
                }
            });
        } else {
            console.error('SettingsButton не доступна');
        }

        tg.MainButton.setParams({
            text: "Начать игру",
            color: "#007BFF"
        });

        tg.MainButton.show();

        tg.MainButton.onClick(() => {
            startGame();
            tg.MainButton.hide();  // Скрыть кнопку после нажатия
        });
    };

    function startGame() {
        // Логика старта игры, можно использовать переданные параметры
        console.log('Игра началась!');
    }
</script>
